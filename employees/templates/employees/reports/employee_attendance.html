{% extends 'common_data/page/pdf_page.html' %}

{% block pre_page %}
<p>NB: Report only includes employees who use timesheets.</p>
<div class="dropdown">
    <button class="btn btn-secondary dropdown-toggle" type="button" id="triggerId" data-toggle="dropdown" aria-haspopup="true"
            aria-expanded="false">
                Actions
            </button>
    <div class="dropdown-menu" aria-labelledby="triggerId">
        <a class="dropdown-item" href="{% url 'employees:employee-attendance-pdf' %}"><i class="fas fa-file-pdf"></i> Generate PDF</a>
        
    </div>
</div>
{% endblock pre_page %}

{% block page_contents %}
<style>
    .day-heading {
        min-width: 16px;
        height:16px;
        border: 1px solid black;
        border-collapse: collapse
    }

    .day-content {
        border:1px solid black;
        border-collapse: collapse;
    }
</style>

<div style="display:flex;">
    <div>
        <h3 style="padding:5px;color:white;background-color:black;">Employee Attendance Report</h3>
        <table>
            <tbody>
                <tr>
                    <td>Date Created:</td>
                    <td>{{date}}</td>
                </tr>
                <tr>
                    <td>Month For:</td>
                    <td>{{month}}</td>
                </tr>
            </tbody>
        </table>
    </div>
    <div style="min-width:30%;"></div>
    <div>
        <img src="{{logo.url}}" width="logo_width" height="150" alt="">
        <p><b>{{business_name}}</b></p>
        <p>{{business_address | linebreaks}}</p>
    </div>
</div>
<div id="report-content">
    <table >
        <thead>
            <tr>
                <th class="day-content" >Employee</th>
                {% for date in days %}
                <th class="day-heading">{{date}}</th>
                {% endfor %}
            </tr>
        </thead>
        <tbody>
            {% for employee in employees %}
            <tr>
                <td class="day-content">{{employee.full_name}}</td>
                {% for date in employee.attendance %}
                    <td class="day-content" style="background-color:{% if date == 0 %}green{% elif date == 1 %}yellow{% else %}red{% endif %};"></td>
                {% endfor %}
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

{% endblock page_contents %}