{% extends "common_data/list_template.html" %} {% block list_headings %}
<tr class="info">
    <td>Date</td>
    <td>ID</td>
    <td>Customer</td>
    <td>Total</td>
    <td>Status</td>
</tr>
{% endblock %} {% block list_content %} 
{% for inv in object_list %}
<tr>
    <td>{{inv.date}}</td>
    <td>{{inv.pk}}</td>
    <td>{{inv.customer}}</td>
    <td>{{inv.total}}</td>
    <td>{{inv.status}}</td>
    <td>
        <div class="dropdown">
            <button class="btn btn-secondary dropdown-toggle" type="button" id="triggerId" data-toggle="dropdown" aria-haspopup="true"
                aria-expanded="false">
                Actions
            </button>
            <div class="dropdown-menu" aria-labelledby="triggerId">
                    
                {% if inv.status == 'quotation' %}
                    <a href="" class="dropdown-item">
                        Create Invoice From Quotation
                    </a>
                {% endif %}
                <!-- can only edit unsubmitted invoices -->
                
                <a class="dropdown-item" href="{% if inv.status == 'quotation' or inv.status == 'draft' %} {% url 'invoicing:sales-draft-update' pk=inv.pk %} {% else %} {% url 'invoicing:sales-invoice-update' pk=inv.pk %} {% endif %}">
                    <i class="fas fa-trash"></i> Update
                </a>
                <a class="dropdown-item" href="{% url 'invoicing:sales-invoice-detail' pk=inv.pk %}">
                        <i class="fas fa-trash"></i> View
                    </a>
                {% if inv.status != 'draft' or inv.status != 'quotation' %}
                
                <h6 class="dropdown-header">Payments</h6>
                <a class="dropdown-item" href="{% url 'invoicing:sales-invoice-payment' pk=inv.pk %}">
                    <i class="fas fa-trash"></i> Apply Payment
                </a>
                <a class="dropdown-item" href="{% url 'invoicing:sales-invoice-payment-detail' pk=inv.pk %}">
                        <i class="fas fa-trash"></i> View Payments
                    </a>
                    <h6 class="dropdown-header">Returns</h6>
                <a class="dropdown-item" href="{% url 'invoicing:credit-note-create' pk=inv.pk %}">
                    <i class="fas fa-trash"></i> Process Returns
                </a>
                <a class="dropdown-item" href="">
                        <i class="fas fa-trash"></i> View Returns
                    </a>
                {% endif %}
                <h6 class="dropdown-header">Other</h6>
                <a class="dropdown-item" href="{% url 'invoicing:sales-invoice-detail' pk=inv.pk %}">
                        <i class="fas fa-trash"></i> Send Email
                    </a>
            </div>
        </div>

    </td>
</tr>
{% endfor %} {% endblock %}